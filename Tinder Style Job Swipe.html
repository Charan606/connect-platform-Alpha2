<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONNEX - Job Swipe</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS Reset --- */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        /* --- Base & Theme Background (from example) --- */
        body {
          font-family: 'Inter', sans-serif;
          background-color: #0a192f;
          background-image:
            radial-gradient(circle at 15% 25%, rgba(42, 92, 199, 0.3) 0%, rgba(42, 92, 199, 0) 40%),
            radial-gradient(circle at 85% 75%, rgba(42, 92, 199, 0.3) 0%, rgba(42, 92, 199, 0) 40%),
            radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px);
          background-size: 100% 100%, 100% 100%, 10px 10px;
          background-attachment: fixed;
          color: #ffffff;
          min-height: 100vh;
        }
        
        /* --- Navbar (Identical to example) --- */
        .navbar {
          background: rgba(10, 25, 47, 0.5);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
          padding: 1rem 0;
          position: sticky;
          top: 0;
          z-index: 1000;
          width: 100%;
        }

        .navbar .nav-container {
          display: flex;
          justify-content: space-between;
          align-items: center;
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 1rem;
        }

        .logo h1 {
          margin: 0;
        }

        .logo a {
          font-size: 1.5rem;
          font-weight: 700;
          color: #ffffff;
          text-decoration: none;
        }

        .nav-links {
          display: flex;
          list-style: none;
          gap: 1.5rem;
        }

        .nav-links a {
          color: #e0e0e0;
          text-decoration: none;
          font-weight: 500;
          transition: color 0.3s ease;
        }

        .nav-links a:hover {
          color: #ffffff;
        }

        .btn-primary {
          background-color: #007aff;
          color: #ffffff;
          text-decoration: none;
          padding: 0.6rem 1.2rem;
          border-radius: 8px;
          font-weight: 600;
          transition: background-color 0.3s ease;
        }

        .btn-primary:hover {
          background-color: #0056b3;
        }

        /* --- Glassmorphism Swipe Card (Updated) --- */
        .swipe-card {
            touch-action: none;
            will-change: transform;
            transition: all 0.3s ease-out;
            /* Glassmorphism from example */
            background: rgba(25, 41, 70, 0.35);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
        }

        /* Styles for the Like/Nope overlays */
        .like-overlay,
        .nope-overlay {
            transition: all 0.2s ease-in-out;
        }

        /* Custom styled checkbox (Unchanged, fits theme) */
        .filter-checkbox {
            appearance: none;
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            background-color: #334155; /* slate-700 */
            border: 1px solid #475569; /* slate-600 */
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }

        .filter-checkbox:checked {
            background-color: #3b82f6; /* blue-600 */
            border-color: #3b82f6;
        }

        .filter-checkbox:checked::after {
            content: '‚úî';
            font-size: 14px;
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<!-- Removed classes from body, now handled by <style> -->
<body>

    <!-- 1. Identical Top Navigation Bar (from example) -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="logo">
          <h1><a href="#" class="logo">CONNEX</a></h1>
        </div>
        <ul class="nav-links">
          <li><a href="#">Home</a></li>
          <li><a href="#">Premium</a></li>
        </ul>
        <div class="cta-button">
          <a href="#" class="btn-primary">Account</a>
        </div>
      </div>
    </nav>

    <!-- Main App Container -->
    <!-- Added flex-grow to make it fill space -->
    <main class="flex-grow flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-sm mx-auto">
            
            <!-- Header (Emoji Removed) -->
            <header class="text-center text-white mb-6">
                <h1 class="text-3xl font-bold">Tinder-Like Job Swipe</h1>
                <p class="text-lg text-gray-400">Swipe right for jobs you like ‚Äî quick and fun matching!</p>
            </header>

            <!-- Filter Checkboxes -->
            <div id="filters" class="flex justify-center gap-4 mb-6 flex-wrap">
                <label class="flex items-center gap-2 text-gray-300 cursor-pointer">
                    <input type="checkbox" data-filter="company" class="filter-checkbox" checked>
                    Show Company
                </label>
                <label class="flex items-center gap-2 text-gray-300 cursor-pointer">
                    <input type="checkbox" data-filter="experience" class="filter-checkbox" checked>
                    Show Experience
                </label>
                <label class="flex items-center gap-2 text-gray-300 cursor-pointer">
                    <input type="checkbox" data-filter="location" class="filter-checkbox" checked>
                    Show Location
                </label>
            </div>

            <!-- Card Deck -->
            <div id="swipe-deck" class="relative w-full h-[60vh] max-h-[500px]">
                <!-- Job cards will be injected here by JavaScript -->
            </div>

            <!-- Deck Reset Message -->
            <div id="deck-reset-msg" class="text-center text-white font-semibold text-lg mt-4 opacity-0 transition-opacity duration-500">
                You've seen all jobs! Resetting the deck...
            </div>

        </div>
    </main>

    <script>
        // --- 1. MOCK DATA ---
        const jobProfiles = [
            { id: 1, title: 'Senior Frontend Developer', company: 'Vercel', location: 'Remote', experience: '5+ Years', description: 'Lead the development of our new design system. Must be a React and Next.js expert.', tags: ['React', 'Next.js'] },
            { id: 2, title: 'Product Designer (UX/UI)', company: 'Figma', location: 'San Francisco, CA', experience: '3-5 Years', description: 'Craft intuitive user experiences for our core product. Strong portfolio required.', tags: ['UX', 'UI', 'Figma'] },
            { id: 3, title: 'Full-Stack Engineer', company: 'Stripe', location: 'Remote (US)', experience: '4+ Years', description: 'Build and maintain robust APIs that power global economic infrastructure.', tags: ['API', 'Ruby', 'Fintech'] },
            { id: 4, title: 'Junior Web Developer', company: 'Local Digital Agency', location: 'Austin, TX', experience: '1-2 Years', description: 'Join our fast-paced agency building websites for small businesses. HTML, CSS, and JS skills a must.', tags: ['HTML', 'CSS', 'JS'] },
            { id: 5, title: 'AI/ML Engineer', company: 'OpenAI', location: 'San Francisco, CA', experience: '5+ Years', description: 'Work on large-scale language models and help shape the future of AI. PhD or equivalent experience.', tags: ['AI', 'ML', 'Python'] },
            { id: 6, title: 'DevOps Engineer', company: 'Amazon Web Services', location: 'Seattle, WA', experience: '3+ Years', description: 'Manage and scale our cloud infrastructure. Expertise in Kubernetes and Terraform.', tags: ['AWS', 'Kubernetes'] },
            { id: 7, title: 'Content Marketing Manager', company: 'HubSpot', location: 'Remote', experience: '4-6 Years', description: 'Create compelling content to drive inbound leads. Strong SEO and writing skills.', tags: ['Marketing', 'SEO'] },
            { id: 8, title: 'Data Scientist', company: 'Netflix', location: 'Los Gatos, CA', experience: '5+ Years', description: 'Analyze viewing patterns and personalization algorithms. Expert in SQL and Python.', tags: ['Data Science', 'SQL'] },
            { id: 9, title: 'iOS Developer', company: 'Spotify', location: 'New York, NY', experience: '3+ Years', description: 'Build and enhance the Spotify experience for millions of iOS users. Deep knowledge of Swift.', tags: ['iOS', 'Swift', 'Mobile'] },
            { id: 10, title: 'UX Researcher', company: 'Shopify', location: 'Remote (Canada)', experience: '2-4 Years', description: 'Conduct user interviews, usability testing, and surveys to provide actionable insights.', tags: ['UX Research', 'Usability'] },
            { id: 11, title: 'Backend Engineer (Node.js)', company: 'Plaid', location: 'Remote', experience: '3+ Years', description: 'Develop secure and scalable backend services for our financial data network.', tags: ['Node.js', 'Backend'] },
            { id: 12, title: 'Technical Project Manager', company: 'Google', location: 'Mountain View, CA', experience: '6+ Years', description: 'Lead complex, multi-disciplinary engineering projects. Requires excellent communication skills.', tags: ['Agile', 'Scrum'] }
        ];

        // --- 2. STATE & DOM ELEMENTS ---
        const deck = document.getElementById('swipe-deck');
        const filtersContainer = document.getElementById('filters');
        const deckResetMsg = document.getElementById('deck-reset-msg');
        
        // Filter state
        const filters = {
            company: true,
            experience: true,
            location: true
        };

        let allCards = [];
        let currentCardIndex = 0;
        let isSwiping = false;
        let startX = 0, startY = 0;

        // --- 3. FUNCTIONS ---

        /**
         * Create a DOM element for a single job card
         */
        function createJobCard(job) {
            const card = document.createElement('div');
            // Added rounded-2xl to match glassmorphism style
            card.className = 'swipe-card absolute inset-0 rounded-2xl shadow-xl overflow-hidden p-6 flex flex-col cursor-grab';
            
            const companyHidden = filters.company ? '' : 'hidden';
            const expHidden = filters.experience ? '' : 'hidden';
            const locHidden = filters.location ? '' : 'hidden';

            card.innerHTML = `
                <!-- Like/Nope Overlays -->
                <div class="like-overlay absolute top-12 left-8 transform -rotate-12 opacity-0 scale-50">
                    <span class="text-green-500 text-7xl font-bold border-4 border-green-500 rounded-full px-5 py-2">‚úî</span>
                </div>
                <div class="nope-overlay absolute top-12 right-8 transform rotate-12 opacity-0 scale-50">
                    <span class="text-red-500 text-7xl font-bold border-4 border-red-500 rounded-full px-5 py-2">‚úñ</span>
                </div>

                <!-- Job Info -->
                <h2 class="text-2xl font-bold text-white">${job.title}</h2>
                
                <div class="toggle-company ${companyHidden}">
                    <!-- Updated text color to match theme -->
                    <p class="text-lg font-medium text-blue-400">${job.company}</p>
                </div>
                
                <div class="flex justify-between text-sm text-gray-400 my-4">
                    <span class="toggle-location ${locHidden}">üìç ${job.location}</span>
                    <span class="toggle-experience ${expHidden}">üìà ${job.experience}</span>
                </div>
                
                <p class="text-gray-300 text-base flex-grow">${job.description}</p>
                
                <div class="flex flex-wrap gap-2 mt-4">
                    <!-- Updated tag colors to match theme -->
                    ${job.tags.map(tag => `<span class="bg-slate-700 text-gray-300 text-xs font-medium px-2.5 py-0.5 rounded-full">${tag}</span>`).join('')}
                </div>
            `;
            return card;
        }

        /**
         * Render the deck of cards, applying initial stack styles
         */
        function renderDeck() {
            deck.innerHTML = '';
            allCards = [];
            currentCardIndex = 0;

            for (let i = jobProfiles.length - 1; i >= 0; i--) {
                const job = jobProfiles[i];
                const card = createJobCard(job);
                allCards.unshift(card); 
                deck.appendChild(card);
            }

            updateDeckStyles();
            
            if (allCards.length > 0) {
                addListeners(allCards[0]);
            }
        }
        
        /**
         * Apply stacking transforms (scale, translate) to the cards
         */
        function updateDeckStyles() {
            allCards.forEach((card, index) => {
                if (index < currentCardIndex) {
                    card.style.display = 'none';
                    return;
                }

                const relativeIndex = index - currentCardIndex;
                card.style.display = 'flex';

                if (relativeIndex === 0) {
                    card.style.transform = 'translateY(0) scale(1)';
                    card.style.opacity = '1';
                    card.style.zIndex = '10';
                } else if (relativeIndex === 1) {
                    card.style.transform = 'translateY(10px) scale(0.95)';
                    card.style.opacity = '0.8';
                    card.style.zIndex = '9';
                } else {
                    card.style.transform = `translateY(${10 + (relativeIndex * 5)}px) scale(${0.95 - (relativeIndex * 0.05)})`;
                    card.style.opacity = '0';
                    card.style.zIndex = '8';
                }
            });
        }
        
        /**
         * Add swipe event listeners (mouse and touch) to a card
         */
        function addListeners(card) {
            card.addEventListener('mousedown', swipeStart);
            card.addEventListener('touchstart', swipeStart, { passive: true });

            card.addEventListener('mousemove', swipeMove);
            card.addEventListener('touchmove', swipeMove, { passive: true });

            card.addEventListener('mouseup', swipeEnd);
            card.addEventListener('touchend', swipeEnd, { passive: true });
            card.addEventListener('mouseleave', swipeEnd); 
        }

        function swipeStart(e) {
            isSwiping = true;
            const card = e.currentTarget;
            card.style.transition = 'none'; 
            
            startX = e.pageX || e.touches[0].pageX;
            startY = e.pageY || e.touches[0].pageY;
        }

        function swipeMove(e) {
            if (!isSwiping) return;
            
            const card = e.currentTarget;
            const currentX = e.pageX || e.touches[0].pageX;
            const currentY = e.pageY || e.touches[0].pageY;

            const diffX = currentX - startX;
            const diffY = currentY - startY;
            const rotate = diffX * 0.1; 

            card.style.transform = `translate(${diffX}px, ${diffY}px) rotate(${rotate}deg)`;

            const likeOverlay = card.querySelector('.like-overlay');
            const nopeOverlay = card.querySelector('.nope-overlay');
            const opacity = Math.min(Math.abs(diffX) / 100, 1); 

            if (diffX > 20) { // Swiping right
                likeOverlay.style.opacity = opacity;
                likeOverlay.style.transform = `rotate(-12deg) scale(${1 + opacity * 0.2})`;
                nopeOverlay.style.opacity = 0;
            } else if (diffX < -20) { // Swiping left
                nopeOverlay.style.opacity = opacity;
                nopeOverlay.style.transform = `rotate(12deg) scale(${1 + opacity * 0.2})`;
                likeOverlay.style.opacity = 0;
            } else {
                likeOverlay.style.opacity = 0;
                nopeOverlay.style.opacity = 0;
            }
        }

        function swipeEnd(e) {
            if (!isSwiping) return;
            isSwiping = false;

            const card = e.currentTarget;
            card.style.transition = 'all 0.3s ease-out'; 

            const currentX = e.pageX || (e.changedTouches && e.changedTouches[0].pageX);
            const finalX = currentX || startX; 
            const diffX = finalX - startX;

            const swipeThreshold = 100; 
            let isLike = false;

            const likeOverlay = card.querySelector('.like-overlay');
            const nopeOverlay = card.querySelector('.nope-overlay');
            
            if (diffX > swipeThreshold) {
                card.style.transform = 'translate(500px, 0) rotate(30deg)';
                isLike = true;
                handleSwipe(card, isLike);
            } else if (diffX < -swipeThreshold) {
                card.style.transform = 'translate(-500px, 0) rotate(-30deg)';
                isLike = false;
                handleSwipe(card, isLike);
            } else {
                card.style.transform = 'translate(0, 0) rotate(0)';
                likeOverlay.style.opacity = 0;
                likeOverlay.style.transform = 'rotate(-12deg) scale(0.5)';
                nopeOverlay.style.opacity = 0;
                nopeOverlay.style.transform = 'rotate(12deg) scale(0.5)';
            }
        }
        
        /**
         * Handle the logic after a successful swipe
         */
        function handleSwipe(card, isLike) {
            console.log(isLike ? 'Liked:' : 'Noped:', jobProfiles[currentCardIndex].title);
            
            currentCardIndex++;
            updateDeckStyles(); 

            // Check for endless cycle
            if (currentCardIndex >= allCards.length) {
                deckResetMsg.style.opacity = '1';

                setTimeout(() => {
                    deckResetMsg.style.opacity = '0';
                    renderDeck();
                    applyFilters(); // Re-apply filters to the new deck
                }, 1500);
            } else {
                addListeners(allCards[currentCardIndex]);
            }
        }

        /**
         * Initialize filter checkboxes and their change logic
         */
        function initFilters() {
            // Set initial checked state from the 'filters' object
            document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
                const filterName = checkbox.dataset.filter;
                checkbox.checked = filters[filterName];
            });

            // Listen for changes
            filtersContainer.addEventListener('change', (e) => {
                const checkbox = e.target.closest('.filter-checkbox');
                if (!checkbox) return;

                const filterName = checkbox.dataset.filter;
                // Toggle the state
                filters[filterName] = checkbox.checked;

                // Apply the filters to the DOM
                applyFilters();
            });
        }

        /**
         * Apply the current filter state to all cards in the DOM
         */
        function applyFilters() {
            const companyElements = document.querySelectorAll('.toggle-company');
            const expElements = document.querySelectorAll('.toggle-experience');
            const locElements = document.querySelectorAll('.toggle-location');

            companyElements.forEach(el => el.classList.toggle('hidden', !filters.company));
            expElements.forEach(el => el.classList.toggle('hidden', !filters.experience));
            locElements.forEach(el => el.classList.toggle('hidden', !filters.location));
        }


        // --- 4. INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDeck();
            initFilters();
            applyFilters();
        });

    </script>
</body>
</html>